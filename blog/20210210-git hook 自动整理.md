---
slug: 20210210
title: git hook 代码自动规范整理
author: Yao
author_title: fe
author_url: https://github.com/caperso
# author_image_url:
tags: [md, fe, daily]
---

# 20210210 git hook 代码自动规范整理

git 提交使用 husky + prettier 自动格式化
安装项目请`npm i prettier -g` 安装 prettier

以下代码仅限于 husky 再次 4.2.x 版本或以下，若升级到 5.0.x 请参考
[husky doc](https://typicode.github.io/husky/#/)

in package.json

```json
  "lint-staged": {
    "*.{js,jsx,less,md,json}": [
      "prettier --write"
    ],
    "*.ts?(x)": [
      "prettier --parser=typescript --write"
    ]
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "scripts":{
      "prettier": "prettier --write src/**/*.js",
  }
```

其在 5.0 更新了项目 public/private 配置组合，
且在安装后使用 postinstall 脚本修改 git 配置

```json
{
  "private": true,
  "scripts": {
    "postinstall": "husky install"
  }
}
```
