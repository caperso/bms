---
slug: 202100209
title: 202100209-外键置入点
author: Yao
author_title: fe
author_url: https://github.com/caperso
# author_image_url:
tags: [md, fe, daily]
---

# 202100209-外键置入点

## 一对多关系

一对多关系只能置入**多**的表中
如一个collection中对应多个records
collection中无法记录多个record_id，这是不可能的

[一对多关系](https://www.sequelize.com.cn/core-concepts/assocs#%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB)

### sequelize在nestjs中的关系声明位置
```ts
export const databaseProviders = [
    {
        provide: "SEQUELIZE",
        useFactory: async () => {
            const sequelize = new Sequelize({
                dialect: "postgres",
                host: config().database.host,
                port: config().database.port,
                username: config().username,
                password: config().password,
                database: config().database.name,
                logging: false,
            });
            sequelize.addModels([User,ScoreCollection, ScoreItem, ScoreRule, ScoreRecord]);

            sequelize.models.User.hasMany(sequelize.models.ScoreCollection);
            sequelize.models.ScoreCollection.hasMany(sequelize.models.ScoreRecord);
            sequelize.models.ScoreCollection.hasMany(sequelize.models.ScoreRule);
            sequelize.models.ScoreCollection.hasMany(sequelize.models.ScoreItem );

            const drop = process.env.DB_FORCE_DROP as undefined | "0" | "1";
            await sequelize.sync({ force: drop === undefined ? false : !!Number(drop) });
            return sequelize;
        },
    },
];

```